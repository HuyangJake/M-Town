(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{349:function(e,s,t){"use strict";t.r(s);var a=t(0),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"getting-around-rootless"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getting-around-rootless"}},[e._v("#")]),e._v(" Getting around Rootless")]),e._v(" "),t("p",[e._v("OS X 10.11 ä¸­å¼•å…¥çš„ Rootlessï¼Œå³ä½¿æ˜¯rootç”¨æˆ·ï¼Œä¹Ÿæ— æ³•å¯¹ä»¥ä¸‹è·¯å¾„æœ‰å†™å’Œæ‰§è¡Œçš„æƒé™ï¼š")]),e._v(" "),t("pre",[t("code",[e._v("/System\n/bin\n/sbin\n/usr (except /usr/local)\nåªæœ‰Appleè‡ªèº«ç­¾åçš„è½¯ä»¶ï¼ˆå«å‘½ä»¤è¡Œå·¥å…·ï¼‰å¯ä»¥ã€‚\n")])]),e._v(" "),t("p",[e._v("Appleçš„Rootlessæœºåˆ¶è™½ç„¶ä¿æŠ¤äº†ç³»ç»Ÿçš„å®‰å…¨ï¼Œé˜²æ­¢äº†å¤§éƒ¨åˆ†æ¶æ„è½¯ä»¶æƒ³é€šè¿‡å•çº¯çš„å¼•å¯¼ç”¨æˆ·ï¼Œè¾“å…¥è‡ªå·±çš„å¯†ç ç‚¹å‡»ç¡®å®šæ¥ç›´æ¥åˆ‡æ¢åˆ°rootåšä¸€äº›è¿æ³•çš„äº‹æƒ…ã€‚ä¹Ÿå¯ä»¥é˜²æ­¢é»‘å®¢é»‘äº†ä¸€ä¸ªç”¨æˆ·ç„¶åå°±æœ‰rootæƒé™å¯ä»¥è‚†æ„å¦„ä¸ºçš„æƒ…å†µï¼Œä¸è¿‡å¯¹äºçœŸæ­£çš„é»‘å®¢æ¥è¯´")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://pic2.zhimg.com/e3a51869c1a65e3cb56378470b5af695_b.jpg",alt:""}})]),e._v(" "),t("h2",{attrs:{id:"disabling-rootless"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disabling-rootless"}},[e._v("#")]),e._v(" Disabling Rootless")]),e._v(" "),t("p",[e._v("åœ¨ç”µè„‘çš„Recovery Modeï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥")]),e._v(" "),t("pre",[t("code",[e._v("csrutil disable; reboot\n")])]),e._v(" "),t("p",[e._v("ç”µè„‘ä¼šé‡å¯ï¼Œæ­¤æ—¶ç”µè„‘å°±ç¦ç”¨äº†Rootlessï¼Œå¯ä»¥è°ƒè¯•ç³»ç»Ÿçº§åˆ«çš„åº”ç”¨ã€‚")]),e._v(" "),t("p",[e._v("å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š")]),e._v(" "),t("pre",[t("code",[e._v("lldb -n Finder\n")])]),e._v(" "),t("p",[e._v("çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹ä¿¡æ¯å°±è¡¨ç¤ºæˆåŠŸ")]),e._v(" "),t("pre",[t("code",[e._v("Process XXX stoped\n.\n.\n.\n")])]),e._v(" "),t("h2",{attrs:{id:"attaching-lldb-to-xcode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#attaching-lldb-to-xcode"}},[e._v("#")]),e._v(" Attaching LLDB to Xcode")]),e._v(" "),t("p",[e._v("ä½¿ç”¨"),t("code",[e._v("lldb")]),e._v(" attach åˆ°æœ€å¸¸ç”¨çš„å·¥å…·Xcodeï¼")]),e._v(" "),t("p",[e._v("æ–¹å¼ä¸€ï¼š")]),e._v(" "),t("pre",[t("code",[e._v("lldb file /Applications/Xcode.app/Contents/MacOS/Xcode\n")])]),e._v(" "),t("p",[e._v("æ–¹å¼äºŒï¼š")]),e._v(" "),t("pre",[t("code",[e._v("lldb -n Xcode  //éœ€è¦Xcodeåœ¨è¿è¡ŒçŠ¶æ€\n")])]),e._v(" "),t("p",[e._v("æ–¹å¼ä¸‰ï¼š")]),e._v(" "),t("pre",[t("code",[e._v("pgrep -x Xcode  //éœ€è¦Xcodeåœ¨è¿è¡ŒçŠ¶æ€\nlldb -p 89921 //89921ä¸ºXcodeçš„PID\n")])]),e._v(" "),t("p",[e._v("æ–¹å¼å››ï¼š(attaching ä¸€ä¸ªå°†ä¼šè¿è¡Œçš„ç¨‹åº)")]),e._v(" "),t("pre",[t("code",[e._v("lldb -n Finder -w\n\npkill Finder\n")])]),e._v(" "),t("p",[e._v("è¿è¡Œç¨‹åºï¼š")]),e._v(" "),t("pre",[t("code",[e._v("process lanuch -e /dev/ttys004 --\n")])]),e._v(" "),t("p",[e._v("è¿™é‡Œçš„"),t("code",[e._v("ttys004")]),e._v("æ˜¯shellä¸­çš„æŸä¸ªtabçš„å”¯ä¸€id")]),e._v(" "),t("hr"),e._v(" "),t("h3",{attrs:{id:"è¿è¡Œç¨‹åºæ—¶å¯ä»¥æºå¸¦çš„å‚æ•°ï¼š"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¿è¡Œç¨‹åºæ—¶å¯ä»¥æºå¸¦çš„å‚æ•°ï¼š"}},[e._v("#")]),e._v(" è¿è¡Œç¨‹åºæ—¶å¯ä»¥æºå¸¦çš„å‚æ•°ï¼š")]),e._v(" "),t("ul",[t("li",[e._v("é€šè¿‡"),t("code",[e._v("-w")]),e._v("å‚æ•°æ”¹å˜è¿è¡Œç¨‹åºçš„ç›®å½•ï¼š")])]),e._v(" "),t("div",{staticClass:"language-lldb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(lldb) process launch -w /Applications\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("ul",[t("li",[e._v("ä¹Ÿå¯ä»¥ç›´æ¥å°†å‚æ•°åŠ åˆ°ç¨‹åºåé¢ï¼š")])]),e._v(" "),t("div",{staticClass:"language-lldb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(lldb) process launch -- /Applications\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[e._v("-X")]),e._v("å‚æ•°è®© "),t("code",[e._v("shell")]),e._v(" æ¥å—ä»»ä½•æ ¼å¼å‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§ "),t("code",[e._v("~")]),e._v(" å­—ç¬¦")])]),e._v(" "),t("div",{staticClass:"language-lldb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(lldb) process launch -X true -- ~/Desktop\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("psï¼š "),t("code",[e._v("run")]),e._v(" å‘½ä»¤æ˜¯ä¸Šé¢ "),t("code",[e._v("process launch -X true --")]),e._v(" çš„ç®€å†™")]),e._v(" "),t("p",[e._v("å¯ä»¥ç›´æ¥  "),t("code",[e._v("run ~/Desktop")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("-o")]),e._v(" å‘½ä»¤è®©LLDBè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶")])]),e._v(" "),t("div",{staticClass:"language-lldb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(lldb) process launch -o /tmp/ls_output.txt -- /Applications\n\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("ul",[t("li",[t("code",[e._v("-i")]),e._v(" å‘½ä»¤å¯ä»¥ä»å¤–éƒ¨æ–‡ä»¶è¯»å–æ•°æ®ï¼Œè¿™åœ¨ä¸æƒ³stdinçš„çŠ¶å†µä¸‹å¾ˆæœ‰ç”¨ï¼ˆè¿˜æ²¡æœ‰ä½“ä¼šåˆ°ğŸ˜Œ ï¼‰")])]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(lldb) process launch -i /tmp/wc_input.txt\n\nç­‰åŒäº\nwc < /tmp/wc_input.txt  //wcä¸ºå½“å‰lldbçš„target\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("ul",[t("li",[t("code",[e._v("-n")]),e._v(" å‘½ä»¤å‘Šè¯‰LLDBä¸è¦åˆ›å»ºstdin")])]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(lldb) process launch -n\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("hr"),e._v(" "),t("p",[e._v("æŒ‰"),t("code",[e._v("Ctrl + C")]),e._v("å¯ä»¥æš‚åœdebuggerï¼Œ æ·»åŠ ä¸€ä¸ªæ–­ç‚¹ï¼š")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('breakpoint set -n "-[NSView hitTest:]"\t\ncontinue //æ–­ç‚¹åç»§ç»­æ‰§è¡Œ\npo $rdi // æŸ¥çœ‹RDI CPU register\t\n//ä¿®æ”¹ä¸€ä¸ªæ–­ç‚¹ï¼Œæ·»åŠ ä¸€ä¸ªè§¦å‘æ¡ä»¶\nbreakpoint modify 1 -c "(BOOL)[$rdi isKindOfClass:[NSTextView class]]" \n\t\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("å†…å®¹å‡ºå¤„ï¼š\n"),t("strong",[e._v("ã€ŠAdvanced Apple Debugging & Reverse Engineeringã€‹")])])])}),[],!1,null,null,null);s.default=n.exports}}]);