(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{350:function(e,t,s){"use strict";s.r(t);var a=s(0),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("CALayer和UIView最大的不同就是，CALayer不处理用户交互。因为它并不清楚具体的响应链。")]),e._v(" "),s("h2",{attrs:{id:"_1-ios-和-macos-的坐标系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ios-和-macos-的坐标系统"}},[e._v("#")]),e._v(" 1. iOS 和 MacOS 的坐标系统")]),e._v(" "),s("ol",[s("li",[s("p",[s("strong",[e._v("点")]),e._v(" —— 在iOS和Mac OS中最常见的坐标体系。点就像是虚拟的像素，也被称 作逻辑像素。在标准设备上，一个点就是一个像素，但是在Retina设备上，一 个点等于2*2个像素。iOS用点作为屏幕的坐标测算体系就是为了在Retina设备 和普通设备上能有一致的视觉效果。")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("像素")]),e._v(" —— 物理像素坐标并不会用来屏幕布局，但是仍然与图片有相对关系。 UIImage是一个屏幕分辨率解决方案，所以指定点来度量大小。但是一些底层 的图片表示如CGImage就会使用像素，所以你要清楚在Retina设备和普通设备 上，他们表现出来了不同的大小。")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("单位")]),e._v(" —— 对于与图片大小或是图层边界相关的显示，单位坐标是一个方便的 度量方式， 当大小改变的时候，也不需要再次调整。单位坐标在OpenGL这种 纹理坐标系统中用得很多，Core Animation中也用到了单位坐标。")])])]),e._v(" "),s("h2",{attrs:{id:"_2-calayer层的简单使用："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-calayer层的简单使用："}},[e._v("#")]),e._v(" 2. CALayer层的简单使用：")]),e._v(" "),s("h3",{attrs:{id:"_2-1-给uiview设置寄宿图片"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-给uiview设置寄宿图片"}},[e._v("#")]),e._v(" 2.1 给UIView设置寄宿图片")]),e._v(" "),s("div",{staticClass:"language-objectivec line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//设置图片")]),e._v("\nlayer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("contents "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("__bridge id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("CGImage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//设置图片的展示模式")]),e._v("\nlayer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("contentsGravity "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" kCAGravityResizeAspect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("p",[s("code",[e._v("contentsGravity")]),e._v("的可选常量：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("kCAGravityCenter \nkCAGravityTop \nkCAGravityBottom \nkCAGravityLeft \nkCAGravityRight \nkCAGravityTopLeft \nkCAGravityTopRight \nkCAGravityBottomLeft \nkCAGravityBottomRight \nkCAGravityResize \nkCAGravityResizeAspect \nkCAGravityResizeAspectFill\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br")])]),s("p",[e._v("将"),s("code",[e._v("contentsScale")]),e._v("设置为1.0，将会以每个点1个像素绘制图片，如果设置为\n2.0，则会以每个点2个像素绘制图片，这就是我们熟知的Retina屏幕。(前提是"),s("code",[e._v("contentsGravity")]),e._v("没有被设置)，视图层UIView有一个类似的属性"),s("code",[e._v("contentScaleFactor")])]),e._v(" "),s("p",[s("strong",[e._v("当用代码的方式来处理寄宿图的时候，一定要记住要手动的设置图层 的 contentsScale 属性，否则，你的图片在Retina设备上就显示得不正确啦。")])]),e._v(" "),s("div",{staticClass:"language-objectivec line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[e._v("layer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("contentsScale "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("UIScreen mainScreen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-2-使用contentsrect实现image-sprites（图片拼合）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-使用contentsrect实现image-sprites（图片拼合）"}},[e._v("#")]),e._v(" 2.2 使用"),s("code",[e._v("contentsRect")]),e._v("实现image sprites（图片拼合）")]),e._v(" "),s("p",[e._v("主要思想：载入一张包含很多小图的大图，然后通过"),s("code",[e._v("contentsRect")]),e._v("将大图中的小图分别展示到不同的视图层中。")]),e._v(" "),s("p",[e._v("优点：图片的载入会更加快，提高了载入性能")]),e._v(" "),s("p",[e._v("contentsRect的"),s("code",[e._v("{0, 0, 0.5, 0.5}")]),e._v("效果\n"),s("img",{attrs:{src:"http://qiniu.huyangjie.cn/coldreading/jpg/contentsRect.png-bigblog",alt:""}})]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('\n- (void)viewDidLoad \n{\n  [super viewDidLoad]; //load sprite sheet\n  UIImage *image = [UIImage imageNamed:@"Sprites.png"];\n  //set igloo sprite\n  [self addSpriteImage:image withContentRect:CGRectMake(0, 0, 0.5, 0.5) toLayer:self.iglooView.layer];\n  //set cone sprite\n  [self addSpriteImage:image withContentRect:CGRectMake(0.5, 0, 0.5, 0.5) toLayer:self.coneView.layer];\n  //set anchor sprite\n  [self addSpriteImage:image withContentRect:CGRectMake(0, 0.5, 0.5, 0.5) toLayer:self.anchorView.layer];\n  //set spaceship sprite\n  [self addSpriteImage:image withContentRect:CGRectMake(0.5, 0.5, 0.5, 0.5) toLayer:self.shipView.layer];\n}\n\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br")])]),s("h3",{attrs:{id:"_2-3-使用contentscenter调整可拉伸区域的大小"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-使用contentscenter调整可拉伸区域的大小"}},[e._v("#")]),e._v(" 2.3 使用"),s("code",[e._v("contentsCenter")]),e._v("调整可拉伸区域的大小")]),e._v(" "),s("p",[e._v("contentsCenter 其实是一个CGRect，它定义了一个固定的边框和一个在图 层上可拉伸的区域。")]),e._v(" "),s("p",[s("img",{attrs:{src:"http://qiniu.huyangjie.cn/coldreading/jpg/contentsCenter.png-bigblog",alt:""}})]),e._v(" "),s("p",[e._v("除此之外还可以用IB来控制"),s("code",[e._v("contentsCenter")]),e._v("属性。 在视图的第四个检查器中，有一个"),s("code",[e._v("stretching")]),e._v("属性，简直不要太赞👍")]),e._v(" "),s("h2",{attrs:{id:"reference"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[e._v("#")]),e._v(" Reference")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://zsisme.gitbooks.io/ios-/content/chapter2/the-contents-image.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("《iOS 核心动画》"),s("OutboundLink")],1),e._v("  感谢译者的付出！👍")])])}),[],!1,null,null,null);t.default=n.exports}}]);