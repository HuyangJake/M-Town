(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{344:function(s,e,t){"use strict";t.r(e);var a=t(0),n=Object(a.a)({},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"getting-around-rootless"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getting-around-rootless","aria-hidden":"true"}},[s._v("#")]),s._v(" Getting around Rootless")]),s._v(" "),t("p",[s._v("OS X 10.11 ä¸­å¼•å…¥çš„ Rootlessï¼Œå³ä½¿æ˜¯rootç”¨æˆ·ï¼Œä¹Ÿæ— æ³•å¯¹ä»¥ä¸‹è·¯å¾„æœ‰å†™å’Œæ‰§è¡Œçš„æƒé™ï¼š")]),s._v(" "),t("pre",[t("code",[s._v("/System\n/bin\n/sbin\n/usr (except /usr/local)\nåªæœ‰Appleè‡ªèº«ç­¾åçš„è½¯ä»¶ï¼ˆå«å‘½ä»¤è¡Œå·¥å…·ï¼‰å¯ä»¥ã€‚\n")])]),s._v(" "),t("p",[s._v("Appleçš„Rootlessæœºåˆ¶è™½ç„¶ä¿æŠ¤äº†ç³»ç»Ÿçš„å®‰å…¨ï¼Œé˜²æ­¢äº†å¤§éƒ¨åˆ†æ¶æ„è½¯ä»¶æƒ³é€šè¿‡å•çº¯çš„å¼•å¯¼ç”¨æˆ·ï¼Œè¾“å…¥è‡ªå·±çš„å¯†ç ç‚¹å‡»ç¡®å®šæ¥ç›´æ¥åˆ‡æ¢åˆ°rootåšä¸€äº›è¿æ³•çš„äº‹æƒ…ã€‚ä¹Ÿå¯ä»¥é˜²æ­¢é»‘å®¢é»‘äº†ä¸€ä¸ªç”¨æˆ·ç„¶åå°±æœ‰rootæƒé™å¯ä»¥è‚†æ„å¦„ä¸ºçš„æƒ…å†µï¼Œä¸è¿‡å¯¹äºçœŸæ­£çš„é»‘å®¢æ¥è¯´")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic2.zhimg.com/e3a51869c1a65e3cb56378470b5af695_b.jpg",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"disabling-rootless"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disabling-rootless","aria-hidden":"true"}},[s._v("#")]),s._v(" Disabling Rootless")]),s._v(" "),t("p",[s._v("åœ¨ç”µè„‘çš„Recovery Modeï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥")]),s._v(" "),t("pre",[t("code",[s._v("csrutil disable; reboot\n")])]),s._v(" "),t("p",[s._v("ç”µè„‘ä¼šé‡å¯ï¼Œæ­¤æ—¶ç”µè„‘å°±ç¦ç”¨äº†Rootlessï¼Œå¯ä»¥è°ƒè¯•ç³»ç»Ÿçº§åˆ«çš„åº”ç”¨ã€‚")]),s._v(" "),t("p",[s._v("å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š")]),s._v(" "),t("pre",[t("code",[s._v("lldb -n Finder\n")])]),s._v(" "),t("p",[s._v("çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹ä¿¡æ¯å°±è¡¨ç¤ºæˆåŠŸ")]),s._v(" "),t("pre",[t("code",[s._v("Process XXX stoped\n.\n.\n.\n")])]),s._v(" "),t("h2",{attrs:{id:"attaching-lldb-to-xcode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#attaching-lldb-to-xcode","aria-hidden":"true"}},[s._v("#")]),s._v(" Attaching LLDB to Xcode")]),s._v(" "),t("p",[s._v("ä½¿ç”¨"),t("code",[s._v("lldb")]),s._v(" attach åˆ°æœ€å¸¸ç”¨çš„å·¥å…·Xcodeï¼")]),s._v(" "),t("p",[s._v("æ–¹å¼ä¸€ï¼š")]),s._v(" "),t("pre",[t("code",[s._v("lldb file /Applications/Xcode.app/Contents/MacOS/Xcode\n")])]),s._v(" "),t("p",[s._v("æ–¹å¼äºŒï¼š")]),s._v(" "),t("pre",[t("code",[s._v("lldb -n Xcode  //éœ€è¦Xcodeåœ¨è¿è¡ŒçŠ¶æ€\n")])]),s._v(" "),t("p",[s._v("æ–¹å¼ä¸‰ï¼š")]),s._v(" "),t("pre",[t("code",[s._v("pgrep -x Xcode  //éœ€è¦Xcodeåœ¨è¿è¡ŒçŠ¶æ€\nlldb -p 89921 //89921ä¸ºXcodeçš„PID\n")])]),s._v(" "),t("p",[s._v("æ–¹å¼å››ï¼š(attaching ä¸€ä¸ªå°†ä¼šè¿è¡Œçš„ç¨‹åº)")]),s._v(" "),t("pre",[t("code",[s._v("lldb -n Finder -w\n\npkill Finder\n")])]),s._v(" "),t("p",[s._v("è¿è¡Œç¨‹åºï¼š")]),s._v(" "),t("pre",[t("code",[s._v("process lanuch -e /dev/ttys004 --\n")])]),s._v(" "),t("p",[s._v("è¿™é‡Œçš„"),t("code",[s._v("ttys004")]),s._v("æ˜¯shellä¸­çš„æŸä¸ªtabçš„å”¯ä¸€id")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"è¿è¡Œç¨‹åºæ—¶å¯ä»¥æºå¸¦çš„å‚æ•°ï¼š"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¿è¡Œç¨‹åºæ—¶å¯ä»¥æºå¸¦çš„å‚æ•°ï¼š","aria-hidden":"true"}},[s._v("#")]),s._v(" è¿è¡Œç¨‹åºæ—¶å¯ä»¥æºå¸¦çš„å‚æ•°ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("é€šè¿‡"),t("code",[s._v("-w")]),s._v("å‚æ•°æ”¹å˜è¿è¡Œç¨‹åºçš„ç›®å½•ï¼š")])]),s._v(" "),t("div",{staticClass:"language-lldb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(lldb) process launch -w /Applications\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("ä¹Ÿå¯ä»¥ç›´æ¥å°†å‚æ•°åŠ åˆ°ç¨‹åºåé¢ï¼š")])]),s._v(" "),t("div",{staticClass:"language-lldb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(lldb) process launch -- /Applications\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("-X")]),s._v("å‚æ•°è®© "),t("code",[s._v("shell")]),s._v(" æ¥å—ä»»ä½•æ ¼å¼å‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§ "),t("code",[s._v("~")]),s._v(" å­—ç¬¦")])]),s._v(" "),t("div",{staticClass:"language-lldb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(lldb) process launch -X true -- ~/Desktop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("psï¼š "),t("code",[s._v("run")]),s._v(" å‘½ä»¤æ˜¯ä¸Šé¢ "),t("code",[s._v("process launch -X true --")]),s._v(" çš„ç®€å†™")]),s._v(" "),t("p",[s._v("å¯ä»¥ç›´æ¥  "),t("code",[s._v("run ~/Desktop")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("-o")]),s._v(" å‘½ä»¤è®©LLDBè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶")])]),s._v(" "),t("div",{staticClass:"language-lldb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(lldb) process launch -o /tmp/ls_output.txt -- /Applications\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("-i")]),s._v(" å‘½ä»¤å¯ä»¥ä»å¤–éƒ¨æ–‡ä»¶è¯»å–æ•°æ®ï¼Œè¿™åœ¨ä¸æƒ³stdinçš„çŠ¶å†µä¸‹å¾ˆæœ‰ç”¨ï¼ˆè¿˜æ²¡æœ‰ä½“ä¼šåˆ°ğŸ˜Œ ï¼‰")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lldb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" process launch -i /tmp/wc_input.txt\n\nç­‰åŒäº\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" /tmp/wc_input.txt  //wcä¸ºå½“å‰lldbçš„target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("-n")]),s._v(" å‘½ä»¤å‘Šè¯‰LLDBä¸è¦åˆ›å»ºstdin")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(lldb) process launch -n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("p",[s._v("æŒ‰"),t("code",[s._v("Ctrl + C")]),s._v("å¯ä»¥æš‚åœdebuggerï¼Œ æ·»åŠ ä¸€ä¸ªæ–­ç‚¹ï¼š")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("breakpoint "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-[NSView hitTest:]"')]),s._v("\t\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("continue")]),s._v(" //æ–­ç‚¹åç»§ç»­æ‰§è¡Œ\npo "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rdi")]),s._v(" // æŸ¥çœ‹RDI CPU register\t\n//ä¿®æ”¹ä¸€ä¸ªæ–­ç‚¹ï¼Œæ·»åŠ ä¸€ä¸ªè§¦å‘æ¡ä»¶\nbreakpoint modify 1 -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"(BOOL)['),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rdi")]),s._v(' isKindOfClass:[NSTextView class]]"')]),s._v(" \n\t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("å†…å®¹å‡ºå¤„ï¼š\n"),t("strong",[s._v("ã€ŠAdvanced Apple Debugging & Reverse Engineeringã€‹")])])])},[],!1,null,null,null);e.default=n.exports}}]);