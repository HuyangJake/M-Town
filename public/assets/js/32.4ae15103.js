(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{353:function(e,t,a){"use strict";a.r(t);var s=a(0),n=Object(s.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("CALayer和UIView最大的不同就是，CALayer不处理用户交互。因为它并不清楚具体的响应链。")]),e._v(" "),a("h2",{attrs:{id:"_1-ios-和-macos-的坐标系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ios-和-macos-的坐标系统","aria-hidden":"true"}},[e._v("#")]),e._v(" 1. iOS 和 MacOS 的坐标系统")]),e._v(" "),a("ol",[a("li",[a("p",[a("strong",[e._v("点")]),e._v(" —— 在iOS和Mac OS中最常见的坐标体系。点就像是虚拟的像素，也被称 作逻辑像素。在标准设备上，一个点就是一个像素，但是在Retina设备上，一 个点等于2*2个像素。iOS用点作为屏幕的坐标测算体系就是为了在Retina设备 和普通设备上能有一致的视觉效果。")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("像素")]),e._v(" —— 物理像素坐标并不会用来屏幕布局，但是仍然与图片有相对关系。 UIImage是一个屏幕分辨率解决方案，所以指定点来度量大小。但是一些底层 的图片表示如CGImage就会使用像素，所以你要清楚在Retina设备和普通设备 上，他们表现出来了不同的大小。")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("单位")]),e._v(" —— 对于与图片大小或是图层边界相关的显示，单位坐标是一个方便的 度量方式， 当大小改变的时候，也不需要再次调整。单位坐标在OpenGL这种 纹理坐标系统中用得很多，Core Animation中也用到了单位坐标。")])])]),e._v(" "),a("h2",{attrs:{id:"_2-calayer层的简单使用："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-calayer层的简单使用：","aria-hidden":"true"}},[e._v("#")]),e._v(" 2. CALayer层的简单使用：")]),e._v(" "),a("h3",{attrs:{id:"_2-1-给uiview设置寄宿图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-给uiview设置寄宿图片","aria-hidden":"true"}},[e._v("#")]),e._v(" 2.1 给UIView设置寄宿图片")]),e._v(" "),a("div",{staticClass:"language-objectivec line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//设置图片")]),e._v("\nlayer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("contents "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("__bridge id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("CGImage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//设置图片的展示模式")]),e._v("\nlayer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("contentsGravity "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" kCAGravityResizeAspect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[a("code",[e._v("contentsGravity")]),e._v("的可选常量：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kCAGravityCenter \nkCAGravityTop \nkCAGravityBottom \nkCAGravityLeft \nkCAGravityRight \nkCAGravityTopLeft \nkCAGravityTopRight \nkCAGravityBottomLeft \nkCAGravityBottomRight \nkCAGravityResize \nkCAGravityResizeAspect \nkCAGravityResizeAspectFill\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br")])]),a("p",[e._v("将"),a("code",[e._v("contentsScale")]),e._v("设置为1.0，将会以每个点1个像素绘制图片，如果设置为\n2.0，则会以每个点2个像素绘制图片，这就是我们熟知的Retina屏幕。(前提是"),a("code",[e._v("contentsGravity")]),e._v("没有被设置)，视图层UIView有一个类似的属性"),a("code",[e._v("contentScaleFactor")])]),e._v(" "),a("p",[a("strong",[e._v("当用代码的方式来处理寄宿图的时候，一定要记住要手动的设置图层 的 contentsScale 属性，否则，你的图片在Retina设备上就显示得不正确啦。")])]),e._v(" "),a("div",{staticClass:"language-objectivec line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[e._v("layer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("contentsScale "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("UIScreen mainScreen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("scale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-2-使用contentsrect实现image-sprites（图片拼合）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-使用contentsrect实现image-sprites（图片拼合）","aria-hidden":"true"}},[e._v("#")]),e._v(" 2.2 使用"),a("code",[e._v("contentsRect")]),e._v("实现image sprites（图片拼合）")]),e._v(" "),a("p",[e._v("主要思想：载入一张包含很多小图的大图，然后通过"),a("code",[e._v("contentsRect")]),e._v("将大图中的小图分别展示到不同的视图层中。")]),e._v(" "),a("p",[e._v("优点：图片的载入会更加快，提高了载入性能")]),e._v(" "),a("p",[e._v("contentsRect的"),a("code",[e._v("{0, 0, 0.5, 0.5}")]),e._v("效果\n"),a("img",{attrs:{src:"http://qiniu.huyangjie.cn/coldreading/jpg/contentsRect.png-bigblog",alt:""}})]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('\n- (void)viewDidLoad \n{\n  [super viewDidLoad]; //load sprite sheet\n  UIImage *image = [UIImage imageNamed:@"Sprites.png"];\n  //set igloo sprite\n  [self addSpriteImage:image withContentRect:CGRectMake(0, 0, 0.5, 0.5) toLayer:self.iglooView.layer];\n  //set cone sprite\n  [self addSpriteImage:image withContentRect:CGRectMake(0.5, 0, 0.5, 0.5) toLayer:self.coneView.layer];\n  //set anchor sprite\n  [self addSpriteImage:image withContentRect:CGRectMake(0, 0.5, 0.5, 0.5) toLayer:self.anchorView.layer];\n  //set spaceship sprite\n  [self addSpriteImage:image withContentRect:CGRectMake(0.5, 0.5, 0.5, 0.5) toLayer:self.shipView.layer];\n}\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br")])]),a("h3",{attrs:{id:"_2-3-使用contentscenter调整可拉伸区域的大小"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-使用contentscenter调整可拉伸区域的大小","aria-hidden":"true"}},[e._v("#")]),e._v(" 2.3 使用"),a("code",[e._v("contentsCenter")]),e._v("调整可拉伸区域的大小")]),e._v(" "),a("p",[e._v("contentsCenter 其实是一个CGRect，它定义了一个固定的边框和一个在图 层上可拉伸的区域。")]),e._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.huyangjie.cn/coldreading/jpg/contentsCenter.png-bigblog",alt:""}})]),e._v(" "),a("p",[e._v("除此之外还可以用IB来控制"),a("code",[e._v("contentsCenter")]),e._v("属性。 在视图的第四个检查器中，有一个"),a("code",[e._v("stretching")]),e._v("属性，简直不要太赞👍")]),e._v(" "),a("h2",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference","aria-hidden":"true"}},[e._v("#")]),e._v(" Reference")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://zsisme.gitbooks.io/ios-/content/chapter2/the-contents-image.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("《iOS 核心动画》"),a("OutboundLink")],1),e._v("  感谢译者的付出！👍")])])},[],!1,null,null,null);t.default=n.exports}}]);